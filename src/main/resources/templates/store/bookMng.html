<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<th:block layout:fragment="script">
    <script th:inline="javascript">

        function bookOk(book_id){
        console.log("clicked");
        console.log(book_id);
        var bookId = book_id;

            $.ajax({
                method:"GET",
                url: "/stores/bookOk",
                data :  {
                    "book_id" : bookId
                },
                contentType: "application/x-www-form-urlencoded; charset=UTF-8;"
            })
            .done(function(response){
                console.log("success");
                location.href="/stores/bookMng/1";
            });
        }

        function bookCancel(book_id){
        console.log("clicked");
        console.log(book_id);
        var bookId = book_id;

            $.ajax({
                method:"GET",
                url: "/stores/bookCancel",
                data :  {
                    "book_id" : bookId
                },
                contentType: "application/x-www-form-urlencoded; charset=UTF-8;"
            })
            .done(function(response){
                console.log("success");
                location.href="/stores/bookMng/1";
            });
        }

    </script>
</th:block>
<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
    <style>

    </style>
</th:block>

<div layout:fragment="content">

    <h2>예약관리</h2>
    <table>
        <tr th:each="book : ${bookMngList}">
            <td th:text="${book.email}">
            </td>
            <td th:text="${book.user_name}">
            </td>
            <td th:text="${book.phone_number}">
            </td>
            <td>
                <button class="btn btn-primary" th:if="${book.book_state}==0" th:value="${book.book_id}" onclick="bookOk(this.value)">승인</button>
                <button class="btn btn-danger" th:unless="${book.book_state}==0" th:value="${book.book_id}" onclick="bookCancel(this.value)">취소</button>
            </td>
        </tr>
    </table>

</div>
</html>