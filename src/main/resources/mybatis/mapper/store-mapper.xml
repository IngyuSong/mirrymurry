<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codepresso3.mirrymurry.mapper.StoreMapper">

    <select id="bookMngList" resultType="com.codepresso3.mirrymurry.vo.BookMng">
        SELECT book_member_id, email, user_name, phone_number, book_state, book_id
        FROM book
        JOIN menu ON menu_id = book_menu_id
        LEFT JOIN member ON book_member_id = member_id
        WHERE menu_store_id = #{store_id}
    </select>

    <update id="bookOk">
        UPDATE book SET book_state = 1 WHERE book_id = #{book_id}
    </update>

    <update id="bookCancel">
        UPDATE book SET book_state = 0 WHERE book_id = #{book_id}
    </update>

    <select id="menuList" resultType="com.codepresso3.mirrymurry.vo.Menu">
        SELECT *
        FROM menu
        JOIN store ON store_id = menu_store_id
        WHERE store_id = #{store_id}
    </select>

    <insert id="addMenu">
        INSERT INTO menu(price, menu_name, menu_info, menu_store_id)
        VALUES (#{menu.price}, #{menu.menu_name}, #{menu.menu_info}, #{menu.menu_store_id} )
    </insert>

    <update id="updateMenu">
        UPDATE menu
        SET price=#{price}, menu_name=#{menu_name}, menu_info=#{menu_info}
        WHERE menu_id = #{menu_id}
    </update>

</mapper>